{% extends "base.html" %} 
{% block content %} 
{% load static %}
      <!-- bradcam_area  -->
      <div class="bradcam_area bradcam_bg_3">
        <div class="container">
            <div class="row">
                <div class="col-xl-12">
                    <div class="bradcam_text">
                        <h3>Blog</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--/ bradcam_area  -->


    <!--================Blog Area =================-->
    {% load static %}

    <section class="blog_area section-padding">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 mb-5 mb-lg-0">
                    <div class="blog_left_sidebar">

                        <!-- Loop through posts -->
                        {% for post in posts %}
                        <article class="blog_item">
                            <div class="blog_item_img">
                                {% if post.image %}
                                    <img class="card-img rounded-0" src="{{ post.image.url }}" alt="{{ post.title }}">
                                {% else %}
                                    <img class="card-img rounded-0" src="{% static 'img/default.jpg' %}" alt="Default Image">
                                {% endif %}
                                <a href="#" class="blog_item_date">
                                    <h3>{{ post.created_at|date:"d" }}</h3>
                                    <p>{{ post.created_at|date:"M" }}</p>
                                </a>
                            </div>

                            <div class="blog_details">
                                <h2>{{ post.title }}</h2>
                                <p>{{ post.description|truncatewords:30 }}</p>
                            </div>
                        </article>
                        {% empty %}
                            <p>No blog posts available.</p>
                        {% endfor %}

                        <!-- Pagination -->
                        <nav class="blog-pagination justify-content-center d-flex">
                            <ul class="pagination">

                                <!-- Previous button -->
                                {% if posts.has_previous %}
                                <li class="page-item">
                                    <a class="page-link" href="?page={{ posts.previous_page_number }}">
                                        <i class="ti-angle-left"></i>
                                    </a>
                                </li>
                                {% endif %}

                                <!-- Page numbers -->
                                {% for num in posts.paginator.page_range %}
                                    {% if posts.number == num %}
                                        <li class="page-item active">
                                            <span class="page-link">{{ num }}</span>
                                        </li>
                                    {% elif num >= posts.number|add:'-2' and num <= posts.number|add:'2' %}
                                        <li class="page-item">
                                            <a class="page-link" href="?page={{ num }}">{{ num }}</a>
                                        </li>
                                    {% endif %}
                                {% endfor %}

                                <!-- Next button -->
                                {% if posts.has_next %}
                                <li class="page-item">
                                    <a class="page-link" href="?page={{ posts.next_page_number }}">
                                        <i class="ti-angle-right"></i>
                                    </a>
                                </li>
                                {% endif %}

                            </ul>
                        </nav>

                    </div>
                </div>
            </div>
        </div>
    </section>


    <!--================Blog Area =================-->
{% endblock %}